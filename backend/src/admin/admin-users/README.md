# Admin Users Module

موديول إدارة المستخدمين في لوحة التحكم يوفر واجهات لإنشاء، استعراض، وحذف مستخدمين بأدوار محددة.

## مكونات الموديول
- `AdminUsersModule`: يربط مخطط `User` عبر `MongooseModule` ويصدّر الخدمة لاستخدامها في وحدات أخرى.
- `AdminUsersController`: يعرّف المسارات `/admin/users` مع العمليات `GET`, `POST`, `DELETE` ومحمية بحراسات `JwtAuthGuard`, `RolesGuard`، مع حصر الوصول على دور `admin` وتوثيق Swagger.
- `AdminUsersService`: يتعامل مع قواعد البيانات لتنفيذ عمليات القراءة، إنشاء المستخدم بكلمة مرور مؤقتة مشفّرة، وحذف المستخدمين.
- `CreateUserDto`: يعرّف التحقق من بيانات إنشاء المستخدم (`username`, `email`, `role`) ورسائل الأخطاء.

## المتطلبات المسبقة
- تهيئة اتصال MongoDB مع مخطط `User`.
- تفعيل حراس المصادقة والأدوار وضبط دور `admin`.
- إعداد bcrypt (أو بيئة Node تدعم التشفير) لاستخدامه في إنشاء كلمات السر المؤقتة.

## التدفقات الرئيسية
1. **عرض المستخدمين (`GET /admin/users`)**  
   - يسترجع بيانات محدودة لكل مستخدم (`username`, `email`, `role`, `createdAt`).
2. **إنشاء مستخدم (`POST /admin/users`)**  
   - يتحقق من عدم وجود المستخدم عبر `email` أو `username`.  
   - ينشئ كلمة مرور مؤقتة عشوائية، يشفرها بـ bcrypt، ويعيد بيانات المستخدم مع الكلمة المؤقتة.  
   - يجب إرسال الكلمة المؤقتة للمستخدم عبر قناة منفصلة (مثلاً البريد) بعد الرد.
3. **حذف مستخدم (`DELETE /admin/users/:id`)**  
   - يحذف المستخدم من قاعدة البيانات ويعيد رسالة نجاح؛ يرمي `NotFoundException` إذا لم يوجد.

## التوسعة والاختبارات
- أضف مسارات إضافية مثل تحديث الدور أو إعادة تعيين كلمة السر بتوسيع الخدمة والكنترولر.
- ينصح بكتابة اختبارات وحدة/تكامل لخدمات الإنشاء والحذف لضمان التعامل الصحيح مع حالات التعارض والأخطاء.

