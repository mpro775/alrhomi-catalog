# Job Status Module

موديول مراقبة حالة المهام يوفر واجهات لمعرفة تقدم مهام المعالجة (مثل معالجة الصور) سواء للمستخدمين المصادقين أو للعموم عبر رابط مبسّط.

## المكونات
- `JobStatusModule`: يربط مخطط `JobStatus` عبر `MongooseModule` ويصدّر الخدمة.
- `JobStatusController`: يحتوي مسارين:
  - `GET /jobs/:jobId/status`: محمي بـ `JwtAuthGuard` ويعيد بيانات كاملة للحالة.
  - `GET /job-status/:jobId`: مسار عام عبر `@Public()` يوفّر نسخة مبسطة للحالة.
- `JobStatusService`: يتعامل مع قاعدة البيانات لجلب الحالة ويرمي `NotFoundException` عند عدم وجود المهمة.

## سيناريو الاستخدام
1. عند إضافة مهمة إلى طابور Bull (مثلاً معالجة العلامة المائية)، يتم إنشاء/تحديث وثيقة في مجموعة `JobStatus`.
2. واجهة العميل تستعلم بشكل دوري عبر أحد المسارين لمعرفة حالة المهمة ونسبة التقدم.
3. يتم إرجاع معلومات من بينها `status`, `progress`, `startedAt`, `finishedAt` (أو subset مبسّط).

## المتطلبات
- وجود مخطط `JobStatus` في `database/schemas`.
- تفعيل `JwtAuthGuard` للمسار الداخلي وإضافة ديكوريتر `@Public()` للمسار العام.

## التوسعة والاختبارات
- يمكن إضافة مسارات لتحديث الحالة أو استرجاع قائمة المهام حسب المستخدم.  
- يُنصح باختبارات وحدة تغطي حالات النجاح وعدم وجود المهمة، إلى جانب اختبارات تكامل للتأكد من الأمان على المسار المحمي.

